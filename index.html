<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Compositional Bandit Experiment">
    <meta name="author" content="Akshay Jagadish, Eric Schulz">
    <meta charset="utf-8">
    <title>Decision making experiment</title>

    <script src='https://cdn.firebase.com/js/client/1.1.1/firebase.js'></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script> 
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script> 
    <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet" type="text/css">
    <link href="js/bootstrap.css" rel="stylesheet" type="text/css">

 </head>
	 
<div class='container' style="width: 95%; height: 95%">
	<div id="page1a" style="display:block;">
		<br>
		<div id="consentform" style="display:block; width: 80%" >
		<h3>Consent form for participation in this online experiment</h3>

		<p> Computational Principles of Intelligence Lab </p>
		<p> Designed by: Akshay Jagadish<br>
				Email: <b>cpilab@tuebingen.mpg.de</b>
		<h4> Consent to Participate in the Learning Study </h4>
		<p> This is a psychology experiment conducted by Eric Schulz, group leader of the Computational Principles of Intelligence Lab at the Max Planck Institute for Biological Cybernetics, and the members of his lab. <br> To consent to participate, you MUST meet the following criteria to participate in the experiment:</p>
			
		<b> 18 years of age or older. <br></b>
		<b> A fluent speaker of English. <br></b>
		<b> Have not previously participated in this experiment. <br></b>

		<p><br>This study is designed to look at how people learn to make decisions to accomplish their goals. In this task, you will be asked to make choices, play games, and answer questions related to those games. <br>The study will take about <b>30 minutes</b> and will pay <b>$XX.00</b>.</p>

		<p>Your participation in this research is voluntary. You may refrain from answering any questions that make you uncomfortable and may withdraw your participation at any time without penalty by exiting this task <!--br-->and alerting the experimenter either via MTurk or via the e-mail address below (please be sure to provide your MTurk ID). <br> You may choose not to complete certain parts of the task or answer certain questions. You may contact us at the address provided below if you have additional questions or concerns. </p>

		<p>Other than monetary compensation, participating in this study will provide no direct benefits to you. But we hope that this research will benefit society at large <!--br-->by contributing towards establishing a scientific foundation for improving people’s learning abilities.</p>
			
		<p>Your online username may be connected to your responses, but we will not be asking for any additional personally-identifying information, and we will handle responses as confidentially as possible. <br> We cannot, however, guarantee the confidentiality of information transmitted over the Internet. We will be keeping de-identified data collected as part of this experiment indefinitely. <br>Data used in scientific publications will remain completely anonymous.</p>

		<p>If you have any questions about the study, feel free to contact our lab. We can be reached at <b>cpilab@tuebingen.mpg.de</b>. </p>

		<ul>
				<li><b>By selecting the “I consent to participate” option below, I acknowledge the participation criteria, that I have read this consent form, and that I agree to take part in the research.</b> </li>
		</ul>
		<br>
		<button type="button" name="button" id="buttonConsentForm" onclick="clickStart('page1a','page1b');">I consent to participate</button><br><br>
		<br>
		<p>If you do not want to consent, you cannot participate in the experiment and should close the window now. </p><br>
		
		<div id="imageloader" style="display:none"></div> 

		</div>
	</div>    
	<!--data protection form -->
	<div id="page1b" style="display:none">
			
		<div id="DataProtection" style = "display:block; width: 80%">
		<h3>Legal Declaration of Consent under Data Protection Law:</h3>
		<p><br>We also ask you to consent to have seen and understood our data protection policy, which can be viewed by clicking on the blue text below. Please do not fill it out.</p>
		<p><br>I have received and took note of the written <a target="_blank" rel="noopener noreferrer" href="https://kyblab.tuebingen.mpg.de/faf/dataprotection.pdf">Data Protection Information Sheet</a> for this study. In doing so, I had sufficient time and opportunity to ask questions about data protection and reconsider my participation in the study. </p>
		
		<p>I am aware that:</p>
		<ul>
				<li>the processing and use of the collected data occur in a pseudonymized form within the scope of the legally prescribed provisions.
					As a general rule, the storage occurs in the form of questionnaires, as well as on electronic data media, for 10 years
					or longer, if this is required by the purpose of the study.</li>
				<li>by providing further personal data in pseudonymized form, collected personal data may be used for the preparation of anonymized
					scientific research work and may also be published and used in an anonymized form in medical journals, scientific publications
					and publicly accessible scientific databases, so that a direct assignment to my person cannot be established.</li>
				<li>the information obtained during this study may also be sent in an anonymized form to cooperation partners within the
					scope of the European General Data Protection Regulation for scientific purposes and to cooperation partners outside of the
					European Union, i.e. to countries with a lower data protection level (this also applies to the USA).</li>
				<li>the data collected within the scope of the study can also be used and processed in the future inside of the Institute.</li>
		</ul> 
		<p>I was informed about my rights, that at any time:</p>
		<ul>
				<li>I can withdraw this declaration of consent.</li>
				<li>I can request information about my stored data and request the correction or blocking of data.</li>
				<li>by cancellation of my participation in the study, I can request that my personal data collected until that time are immediately deleted or anonymized.</li>
				<li>I can request that my data are handed out to me or to third parties (if technically feasible).</li>
		</ul>

		<p>I herewith declare that:</p>
		<ul>
				<li>I have been adequately informed about the collection and processing of my data and rights.</li>
				<li>I consent to the collection and processing of personal data within the scope of the study and its pseudonymized disclosure so that
					only the persons conducting the study can establish a link between the data and my person.</li>
		</ul>
		<p>By selecting the consent option below, I agree to participate in online studies or experiments using learning, and I consent to the use of my data described in the Data Protection Information Sheet and confirm having received a copy of the Data Protection Sheet.</p>
		<p>Note: If you do not consent to participate in this study or have your data used as outlined in the Data Protection Information Sheet, then this experiment will now close and you will not proceed any further. No information about you will be retained. </p>
		<br>
		</div>
				
		<button type="button" id="buttonDataForm" onclick="clickStart('page1b','page2');">I consent</button><br>
		<br>
		<p>If you do not want to consent, you cannot participate in the experiment and should close the window now.</p><br>

	</div>    

<!--Introduce Bandit City-->
<div id="page2" style="display:none">
	<br>
		<p><b>Welcome!</b></p>
		<ul>
		<li>Today, you are going be a gambler visiting the fictional town of Bandit City (BC).</li>
		<li>BC is the place to be if you wish to immerse yourself in the world of gambling.</li>
		<li>Like any major gambling city, BC has several casinos lined up next to one another.</li>
		<li>As an experienced gambler, you like to visit all the casinos whenever you are in town and make some money.</li>
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page2','page3')"; >Go to next page</button>
</div>


<!--Tasks-->
<div id="page3" style="display:none">
	<br>
		<p><b>Local News!</b></p>
		<ul>
		<li>To promote local businesses, casinos in BC recently decided to buy a new type of slot machines from their local manufactures.</li>
		<li>So all casinos now have two new slot machines, one each from Green Geeks and Blue Lagoons.</li>
		<li>Let us take a look at this new machine.</li>
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page3','page4a')"; >Go to next page</button>
</div>

<!--MAB-->
<div id="page4a" style="display:none">
	<br>
		<p><b>Slot Machine 2.0</b></p>
		<ul>
		<li> Each slot machine has several options that you can choose from to earn BC coins. </li>
		<li> Each option maps on to different keys on your keyboard. </li>
		<li> You can choose an option by pressing the corresponding key on your keyboard. </li>
		<li> Color of the keys indicate the company it was made by. </li> 
		It could be green, made by Green Geeks:
		<br><img src="figs/Green_arms.png" width="600" ><br>
		Or blue, made by Blue Lagoons:
		<br><img src="figs/Blue_arms.png" width="600" ><br>
		<li> When you have made a choice, the key you pressed becomes bold and the amount of BC coins you won will appear on the screen. </li>
		</ul>		
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page4a','page4b')"; >Go to next page</button>
</div>

<!--MAB-->
<div id="page4b" style="display:none">
	<br>
		<p><b>Slot Machines 2.0</b></p>
		<ul>
		<li> The number of BC coins you can get is different for the different keys of the slot machine. </li>
		<li> You have 5 chances to try and find the most rewarding option. </li>
		<li> The earlier you find the most rewarding option for a given machine, the more BC coins you can earn from it. </li>
		<li> Since you feel quite motivated, you will play all the different types of slot machines in a casino before moving to the next. </li>
		<li> You will exchange all the BC coins you earned across casinos for real money at the end of your adventure. </li>
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page4b','page5a')"; >Go to next page</button>
</div>
<!--sMAB-->
<div id="page5a" style="display:none">
	<br>
		<p><b>Shhh...</b></p>
		<ul>
		<li> During his visit to BC last weekend, a friend of yours had an "Aha" moment! </li>
		<li> As he went from casino to casino, he noticed that slot machines from the same company behaved somewhat similarly. </li>
		<li> He realized that the coins he could get by pressing the different options on a slot machine followed a certain pattern. </li>
		<li> It was as if the companies preset the coins one could earn from each option to these patterns before delivering it. </li>
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page5a','page5b')"; >Go to next page</button>
</div>

<!--sMAB-->
<div id="page5b" style="display:none">
	<br>
		<p><b>Hmm...but what trends?</b></p>
		<ul>
		<li> He noted that all machines made by a company is preset to one of the two trends: </li>
		<h5> 1. Rising/Falling Trend </h5>
		<li> He figured that in one set of machines, he could get more and more (Left) or less and less (Right) BC coins as he went from key S (left-most) to key L (right-most) as shown below. </li>
		<br><img src="figs/LinPos1.png" width="280" > <img src="figs/LinNeg1.png" width="280" ><br> 
		<li> Machine from a company could be rising in one casino and falling in the other but across casinos all machines of this company (i.e. same colored) belonged only to the rising/falling trend. </li>
		<h5> 2. Alternate Trend </h5>
		<li> In another set of machines, he saw that every other option was highly rewarding so either keys (S, F, K) or (D, J, L) were more rewarding as shown below. </li>
		<br><img src="figs/PerEven1.png" width="280" > <img src="figs/PerOdd2.png" width="280" > <br>
		<li> Again, whether a machine of a particular color is preset to (S, F, K) or (D, J, L) to be highly rewarding could change between casinos but all machines from this company belonged only to the alternate trend.</li>	
		<!-- <br><img src="figs/LinNeg1.png" width="300" ><br> -->
		<!-- <li> Let us assume hypothetically that machines from Blue Lagoons followed Rising/Falling Trend </li>
		<li> Then, the coins you caan get for the different options on blue machines can be either rising or falling and you can only know which of the two by playing against it.  </li>
		 -->
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page5b','page5c')"; >Go to next page</button>
</div>

<div id="page5c" style="display:none">
	<br>
		<p><b>Trends are not fixed?</b></p>
		<ul>
		<h5> The degree of rise and fall are not the same in every casino. </h5>
		<li> For example, you can see two different rising trends below. </li>
		<br><img src="figs/LinPos1.png" width="280" > <img src="figs/LinPos2.png" width="280" ><br> 
		<li> For example, you can see two different falling trends below. </li>
		<br><img src="figs/LinNeg1.png" width="280" > <img src="figs/LinNeg2.png" width="280" ><br> 
		<!-- <li> Let us assume hypothetically that machines from Blue Lagoons now followed Alternate Trend </li>
		<li> Then, blue machines can have keys (S, F, K) as highly rewarding or  keys (J, K, L) and again, you can only know which of the two by playing against it.  </li> -->
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page5c','page5d')"; >Go to next page</button>
</div>

<div id="page5d" style="display:none">
	<br>
		<p><b>Patterns are not fixed?</b></p>
		<ul>
		<h5> Same goes for alternate functions, they might not be as highly rewarding in every casino.</h5>
		<li> For example, you can see two different (D, J, L) alternate trend below. </li>
		<br><img src="figs/PerOdd2.png" width="280" > <img src="figs/PerOdd1.png" width="280" ><br>
		<li> For example, you can see two different (S, F, K) alternate trend below. </li>
		<br><img src="figs/PerEven1.png" width="280" > <img src="figs/PerEven2.png" width="280" ><br>
		<!-- <li> Let us assume hypothetically that machines from Blue Lagoons now followed Alternate Trend </li>
		<li> Then, blue machines can have keys (S, F, K) as highly rewarding or  keys (J, K, L) and again, you can only know which of the two by playing against it.  </li> -->
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page5d','page6')"; >Go to next page</button>
</div>

<!--Task purpose-->
<div id="page6" style="display:none">
	<br>
		<p><b>Your mission</b></p>
		<ul>
		<li> Unfortunately, your buddy went a little out of control that night, what happens in BC stays in BC. </li>
		<li> Now, he only remembers the trends and does not recollect which trend belongs to which company. </li>
		<li> Good news is that if you can figure out this, you can end up leaving BC a rich man. </li>
		<!-- <li> Remember, the trend followed by a slot machine i.e. Linear or Alternate remains same as you go from casino to casino. </li> -->
		<!-- <li> After you visited all the casinos, you can exchange all the BC coins you have collected for real money. </li> -->
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="ConditionSwitch('page6')"; >Go to next page</button>
</div>

<!--Condition based: Compositional-->
<div id="page7a" style="display:none">
	<br>
		<p><b>Oh wait!</b></p>
		<ul>			
		<li> Looks like the casino owners have caught on to us, they noticed that a lot of people were doing well on the new slot machines. </li>
		<li> They now want to challenge their visitors by making it harder to earn BC coins. </li>
		<li> So, once you finish playing against the two slot machines, they would connect the machines together and ask you to play against the connected slot machine. </li>
		<li> The machines were connected such that pressing a button on one would result in pressing the same button on the other. </li>
		<li> The options for such a connected machine will be half-green and half-blue as shown below. </li>
		<br><img src="figs/GW_buttons.png" width="600" ><br>
		<li> The total coins you earn by choosing an option on such a machine is the sum of coins from the two slot machines for the choosen button. </li>
		<li> Unlike your friend, you will be playing against three slot machines in each casino today. </li>
		<li> Hope you are up for the challenge! </li>
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page7a','page8')"; >Go to next page</button>
</div>
<!--Condition based: Non-Compositional-->
<div id="page7b" style="display:none">
	<br>
		<p><b>Oh wait!</b></p>
		<li> Looks like the casino owners have caught on to us, they noticed that a lot of people were doing well on the new slot machines. </li>
		<li> They now want to challenge their visitors by making it harder to earn BC coins. </li>
		<li> So, they connected the machines together and asked people to play against the connected slot machine instead. </li>
		<li> The machines were connected such that pressing a button on one would result in pressing the same button on the other. </li>
		<li> The options for such a connected machine will be half-green and half-blue as shown below. </li>
		<br><img src="figs/GW_buttons.png" width="600" ><br>
		<li> The total coins you earn by choosing an option on such a machine is the sum of coins from the two slot machines for the choosen button. </li>
		<li> Unlike your friend, you will be playing only one machine in each casino today. </li>
		<li> Hope you are up for the challenge!</li>
		</ul>
	<br>			   
	<button type="button" name="button"; onclick="clickStart('page7b','page8')"; >Go to next page</button>
</div>

<!--Sixth page contains keyboard layout-->
	<div id="page8" style="display:none">
		<br>
			<p><b>Keyboard finger position:</b></p>
					<ul>
					<li>We kindly ask you to place your hands on the keyboard as shown in the picture below.</li>
					<li>Please use your left hand to select the options <b>S</b>, <b>D</b> or <b>F</b>. Use your right hand to select <b>J</b>, <b>K</b> or <b>L</b>.</li>
					<li>Please use your left index finger to select <b>F</b>, and your right index finger to select <b>J</b>, and so forth.</li>
				</ul>
			<br>
			<img src="figs/fingerposition.png" width="600" ><br><br>
			<button type="button" name="button"; onclick="clickStart('page8','page9')"; >Go to next page</button>  
		<br>
	</div>

	<!--Seventh page contains comprehension check-->
	<div id="page9" style="display:none">
		<fieldset>
			<legend>Please answer a few questions about this study before proceeding</legend>
			<fieldset style="float:left;width:400px;margin:5px">
				What is your goal when you visit a casino?<br>
				<input type="radio" name="q1"  > Try out all options on every slot machine in the casino.<br>
				<input type="radio" name="q1" id="icheck1" > Gain as many BC coins as possible from each slot machine.<br>
				<input type="radio" name="q1" > Pick an arbitary option in every try.<br>
				<input type="radio" name="q1" > I do not know.<br>
			</fieldset>
			<fieldset style="float:left;width:400px;margin:5px">
				How many slot machines will you play against in each casino?<br>
				<input type="radio" name="q2"> Changes every casino. <br>
				<input type="radio" name="q2"> 2 <br>
				<input type="radio" name="q2" id="icheck2"> <span id="casino_id"> 1 </span> <br>
				<input type="radio" name="q2"> I am not sure. <br>
			</fieldset>
			<fieldset style="float:left;width:400px;margin:5px">
				Let us say a machine from GreenGeeks followed a rising trend in a casino, what trend will another machine from them follow in the next casino?<br>
				<input type="radio" name="q3">  
					Rising trend again.<br>
				<input type="radio" name="q3" id="icheck3"> 
					Either rising or falling, one needs to figure out which.<br>
				<input type="radio" name="q3"> 
					Falling trend for sure.<br>
				<input type="radio" name="q3"> 
					Either rising, falling or alternate, one needs to figure out which.<br>
			</fieldset>
			<fieldset style="float:left;width:400px;margin:5px">
				What does pressing an option that is half-green and half-blue mean?<br>
				<input type="radio" name="q4">  
					Simulates pressing the option on either green or blue machine, you do not know which. <br>
				<input type="radio" name="q4" id="icheck4"> 
					Simulates pressing the same option on both machines simultaneously. <br>
				<input type="radio" name="q4"> 
					Indicates a completely new slot machine unrelated to previous slot machines.<br>
				<input type="radio" name="q4"> 
					Indicates an issue with the machine. <br>
			</fieldset>
		</fieldset>
		<br><br><br><br>
		<p>You will only be directed to the next page if you manage to answer all of the questions correctly.</p>
		<button type="button" name="button"; onclick="instructioncheck()"; >Check answers</button>  
	</div>

	<!--Eighth page contains task-->
	<div id="page10" style="display:none">
		<h1> <font size="4">Please choose an option to gain BC coins.</font> </h1>
		<div id="explainshow" style="display:none">
			<p> <b>Summarized Instructions:</b></p>
			<p><b>I.</b> Below, there are 6 different options marked by different letters. When you press the letter/symbol of a particular option on your keyboard, the number of BC coins you earn for that option will be revealed and will be displayed below for 2 seconds. </p>
			<p><b>II.</b> Options can be repeatedly chosen, although there may be small variations in the BC coins earned.</p>
			<p><b>III.</b> Every option can lead to different amounts of BC coins. Your task is to earn as many coins as possible by selecting valuable options. </p>
			<p><b>IV.</b> On top of the options, you can see how many tries you have left for the current slot machine and the amount of coins you have earned so far.</p>
			<p><b>V.</b> The options are colored based on the company that manufactured it. Knowing what these colors indicate can help you to gain more coins.</p>				
			<button type="button" name="button"; onclick="clickStart('explainshow','explainhide')"; >Hide guidelines</button>
		</div>
		<div id="explainhide" style="display:block">
			<button type="button" name="button"; onclick="clickStart('explainhide','explainshow')"; >Show guidelines</button>
		</div>
		<div id="begintask" style="display:block">
			<center>
				<b><h3><div id="remain">Number of trials left: 5</div></h3></b>
				<b><h3><div id="score">Total Coins Earned: 0.0</div></h3></b></b>
				<div id="feature"></div></b></b>
				<div id='arm1' style="display: inline"></div>
				<div id='arm2' style="display: inline"></div>
				<div id='arm3' style="display: inline"></div>
				<div id='arm4' style="display: inline"></div>
				<div id='arm5' style="display: inline"></div>
				<div id='arm6' style="display: inline"></div>
				<div id='arm7' style="display: inline"></div>
				<div id='arm8' style="display: inline"></div><br>        
				<div id="next" style="display: block">
				<b><h3><div id="outcome">Please choose an option!</div></h3></b>
				</div>
			</center>   
		</div>
	</div>

	<div id="showperformance" style="display:none">
		<center>
			<b><h4><div id="numtasks"> Casino 0 out of 20 now visited.</div></h4></b>
			<b><h4><div id="percentreward"> You earned 0% of maximum possible BC coins in the last casino.</div></h4></b>
			<b><h5><div>Please click on "Next Casino" to continue.</div></h5></b>
			<button type="button" name="button"; onclick="clickStart('showperformance','page10')"; >Next Casino</button>
		</center>
	</div>


	<!--Ninth page contains demographics-->
	<div id="page11" style="display:none">
		<h1> <font size="4">Please tell us something about yourself.</font> </h1>
		<fieldset>
			<div style="float:left;width:400px;margin:5px">
				How old are you?<br>
				<input id="age" type="radio" name="age" onclick="setage(20)" >18-25<br>
				<input id="age" type="radio" name="age" onclick="setage(30)" >26-35<br>
				<input id="age" type="radio" name="age" onclick="setage(40)" >36-50<br>
				<input id="age" type="radio" name="age" onclick="setage(50)" >above 50<br>
			</div>
			<div style="float:left;width:400px;margin:5px">
				What's your gender?<br>
				<input id="gender" type="radio" name="gender" onclick="setgender(0)" >Female<br>
				<input id="gender" type="radio" name="gender" onclick="setgender(1)" >Male<br>
				<input id="gender" type="radio" name="gender" onclick="setgender(2)" >Diverse<br>
			</div>
			<div style="float:left;width:400px;margin:5px">Handedness?<br>
				<input type="radio" name="handed" value="1" >Right<br>
				<input type="radio" name="handed" value="2" >Left<br>
			</div>
		</fieldset>
		<div style="width:50px;margin:0 auto">
			<button type="button" name="button"; onclick="mysubmit()"; >Done</button>
		</div>
	
		<!--Tenth page contains results and code word-->
	</div>
		<div id="page12" style="display:none">
			<h1><font size="4">Your performance and reward</font></h1>
			<div id="result"></div><br>
			<div id="money"></div><br>
			<p>Thank you very much for participating in our study.</p>
			<p>Your Mechanical Turk Password is:<br> <b>compbandits</b></p><br>
			<p>In case you have any questions, please contact us via our MTurk account or write an email to<br> <b>akshay.jagadish@tue.mpg.de</b></p>
		</div>
	</div>
    <script src="js/compositionalbandit.js" charset="utf-8"></script>
    </body>
</html>
